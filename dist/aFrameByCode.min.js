(function(k){AFRAME.$=$=document.querySelector.bind(document);AFRAME.$$=$$=document.querySelectorAll.bind(document);var f=function(o,g,q){var p=0;return function(){q&&q(Math.min(o,p+1),o);if(++p>=o){o=null;if(q){q=null}if(g){g();g=null}}}};var n=function(){var t;if(typeof arguments[0]=="string"){t={tag:arguments[0]};if(typeof arguments[1]=="string"){t.attributes=arguments[2]||{};t.attributes.src=arguments[1]}else{if(arguments[1].attributes){t.attributes=arguments[1].attributes;t.children=arguments[1].children}else{if(arguments[1].children){t.attributes={};t.children=arguments[1].children}else{t.attributes=arguments[1]||{}}}}}else{t=arguments[0]}var o={attributes:{}};if(true){var g=t.tag||"a-entity";var u="";var q=g.split("#");if(q.length>1){g=q[0];u=q[1]}o.tag=g;o.attributes.id=u}for(var s in t.attributes){o.attributes[s]=t.attributes[s]}if(t.children){var r=t.children;o.children=[];if(Array.isArray(r)){for(var p=0;p<r.length;p++){o.children.push(n(r[p]))}}else{for(var p in r){o.children.push(n(p,r[p]))}}}return o};var j=function(){var g=n.apply(n,arguments);return this.createAnEntity(g,this)};var d=function(r,o){if(!r){return}var q;if(Array.isArray(r)){for(var p=0;p<r.length;p++){q=this.createAnEntity(r[p],this);o&&o(q)}}else{for(var g in r){q=this.addAnEntity(g,r[g]);o&&o(q)}}};var l=function(q,p){if(typeof p=="undefined"){p=this}var q=n(q);var o=document.createElement(q.tag);if(p){p.appendChild(o)}h(o);c(o,q.attributes);if(q.children){for(var g=0;g<q.children.length;g++){this.createAnEntity(q.children[g],o)}}return o};var b=function(o){var g=AFRAME.$(o);g.parentNode.removeChild(g)};var m=function(p){var o=$$(p);for(var g=0;g<o.length;g++){o[g].parentNode&&o[g].parentNode.removeChild(o[g])}};var a=function(){this.onRemove&&this.onRemove();this.parentNode.removeChild(this)};var h=function(g){g.addAnEntity=j.bind(g);g.addEntities=d.bind(g);g.createAnEntity=l.bind(g);g.removeAnEntity=b.bind(g);g.removeEntities=m.bind(g);g.removeMe=a.bind(g);return g};var c=function(p,g){if(g){for(var o in g){p.setAttribute(o,g[o]||"")}}};AFRAME.extScenes={};AFRAME.extCurrScene=null;AFRAME.createAScene=function(g){AFRAME.extScenes[g.id]=g;return this};AFRAME.loadScene=function(g){if(this.extCurrScene){this.extCurrScene.removeMe()}var p=document.createElement("a-scene");h(p);var q=this.extScenes[g];if(!q){return console.error("No scene: "+g)}document.body.appendChild(p);if(q.onRemove){p.onRemove=q.onRemove.bind(q)}this.extCurrScene=p;var o=q.attributes||{};o.id=g;c(p,o);p.addAnEntity("a-assets",{id:"assets"});p.assets=new i("#assets");p.addEntities(q.children);if(q.onInit){q.onInit.bind(q)(p)}p.assets.load(q.onLoaded&&q.onLoaded.bind(q),q.onLoading&&q.onLoading.bind(q))};var e=function(o,g,q){if(!q){return}var p=function(){o.removeEventListener(o._eventName,p);delete o._eventName;var r=q;q=null;r()};if(g=="script"){return o.onload=function(){delete o.onload;var r=q;q=null;r()}}if(g=="img"){o._eventName="load"}else{if(g=="audio"||g=="video"){o._eventName="loadeddata"}else{o._eventName="loaded"}}o.addEventListener(o._eventName,p)};var i=function(g){this.id=g;this.list={}};i.prototype.add=function(){var q=n.apply(n,arguments);if(!q.attributes.crossorigin){q.attributes.crossorigin="anonymous"}var g=q.tag;var o=$(this.id);var p=o.addAnEntity(q);this.list[g]=p;return this};i.prototype.addList=function(p){if(Array.isArray(p)){for(var o=0;o<p.length;o++){this.add(p[o])}}else{for(var g in p){this.add(g,p[g])}}return this};i.prototype.load=function(o,t){var s=this.list;this.list={};var p=0;for(var r in s){p++}if(p<1){return o&&o()}var q=f(p,function(){o&&o()},t);for(var g in s){e(s[g],g,q)}return this};AFRAME.registerComponent("f-click-to-scene",{schema:{scene:{type:"string"}},init:function(){this.el.addEventListener("click",this.loadScene.bind(this))},loadScene:function(){AFRAME.loadScene(this.data.scene)},remove:function(){this.el.removeEventListener("click",this.loadScene.bind(this))}});document.addEventListener("DOMContentLoaded",function(){document.removeEventListener("DOMContentLoaded",arguments.callee,false);var g=document.body.getAttribute("scene");if(g){AFRAME.loadScene(g)}},false)})(window);